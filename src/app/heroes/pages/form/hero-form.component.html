<div class="form-container">
  <div class="form-header">
    <button class="btn-back" (click)="onCancel()">
      <span class="btn-back__icon">←</span>
      Volver
    </button>
    <h1 class="form-header__title">{{ $formTitle() }}</h1>
    <div class="form-header__spacer"></div>
  </div>

  <div class="form-card">
    <form [formGroup]="heroForm" (ngSubmit)="onSubmit()">
      <div class="form-grid">
        <!-- ID Field -->
        <div class="form-group" [class.full-width]="!$isEditMode()">
          <label for="id" class="form-group__label">
            ID del Héroe
            <span class="form-group__required">*</span>
          </label>
          <input
            class="form-group__input"
            type="text"
            id="id"
            formControlName="id"
            placeholder="batman, superman, etc."
            [class.error]="hasError('id')"
          />
          @if (hasError("id")) {
            <span class="form-group__error-message">{{
              getErrorMessage("id")
            }}</span>
          }
          @if (!$isEditMode()) {
            <span class="form-group__helper-text"
              >Solo letras minúsculas, números y guiones</span
            >
          }
        </div>

        <!-- Superhero Name -->
        <div class="form-group">
          <label for="superhero" class="form-group__label">
            Nombre de Superhéroe
            <span class="form-group__required">*</span>
          </label>
          <input
            class="form-group__input"
            type="text"
            id="superhero"
            formControlName="superhero"
            placeholder="Batman"
            [class.error]="hasError('superhero')"
          />
          @if (hasError("superhero")) {
            <span class="form-group__error-message">{{
              getErrorMessage("superhero")
            }}</span>
          }
        </div>

        <!-- Publisher -->
        <div class="form-group">
          <label for="publisher" class="form-group__label">
            Editorial
            <span class="form-group__required">*</span>
          </label>
          <select
            class="form-group__select"
            id="publisher"
            formControlName="publisher"
            [class.error]="hasError('publisher')"
          >
            <option value="">Seleccione una editorial</option>
            <option value="DC Comics">DC Comics</option>
            <option value="Marvel Comics">Marvel Comics</option>
          </select>
          @if (hasError("publisher")) {
            <span class="form-group__error-message">{{
              getErrorMessage("publisher")
            }}</span>
          }
        </div>

        <!-- Alter Ego -->
        <div class="form-group">
          <label for="alter_ego" class="form-group__label">
            Identidad Secreta
            <span class="form-group__required">*</span>
          </label>
          <input
            class="form-group__input"
            type="text"
            id="alter_ego"
            formControlName="alter_ego"
            placeholder="Bruce Wayne"
            [class.error]="hasError('alter_ego')"
          />
          @if (hasError("alter_ego")) {
            <span class="form-group__error-message">{{
              getErrorMessage("alter_ego")
            }}</span>
          }
        </div>

        <!-- First Appearance -->
        <div class="form-group full-width">
          <label for="first_appearance" class="form-group__label">
            Primera Aparición
            <span class="form-group__required">*</span>
          </label>
          <input
            class="form-group__input"
            type="text"
            id="first_appearance"
            formControlName="first_appearance"
            placeholder="Detective Comics #27"
            [class.error]="hasError('first_appearance')"
          />
          @if (hasError("first_appearance")) {
            <span class="form-group__error-message">{{
              getErrorMessage("first_appearance")
            }}</span>
          }
        </div>

        <!-- Image -->
        <div class="form-group">
          <label for="img" class="form-group__label">
            Imagen
            <span class="form-group__required">*</span>
          </label>
          <input
            class="form-group__input"
            type="text"
            id="img"
            formControlName="img"
            placeholder="dc-batman"
            [class.error]="hasError('img')"
          />
          @if (hasError("img")) {
            <span class="form-group__error-message">{{
              getErrorMessage("img")
            }}</span>
          }
          <span class="form-group__helper-text"
            >Nombre del archivo sin extensión</span
          >
        </div>

        <!-- Alt Image -->
        <div class="form-group">
          <label for="alt_img" class="form-group__label"
            >Imagen Alternativa</label
          >
          <input
            class="form-group__input"
            type="text"
            id="alt_img"
            formControlName="alt_img"
            placeholder="(Opcional)"
          />
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-cancel" (click)="onCancel()">
          Cancelar
        </button>
        <button type="submit" class="btn-submit">
          @if (heroForm.disabled) {
            <span class="spinner-small"></span>
            Guardando...
          } @else {
            {{ $submitButtonText() }}
          }
        </button>
      </div>
    </form>
  </div>
</div>
