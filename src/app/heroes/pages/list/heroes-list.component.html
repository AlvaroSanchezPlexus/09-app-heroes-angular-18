<div class="heroes-container">
  <div class="header">
    <h1 class="header__title">HÃ©roes</h1>
    <button class="btn-new" routerLink="/heroes/new">
      <span class="btn-new__icon">+</span>
      Nuevo HÃ©roe
    </button>
  </div>

  <!-- Search Bar -->
  <div class="search-container">
    <input
      type="text"
      class="search-input"
      placeholder="ğŸ” Buscar hÃ©roe por nombre, identidad o editorial..."
      (input)="onSearchChange($event)"
      [value]="$searchTerm()"
    />
    @if ($searchTerm()) {
      <button class="btn-clear" (click)="clearSearch()">âœ•</button>
    }
  </div>

  <!-- Loading State -->
  @if ($isLoading()) {
    <div class="loading-container">
      @defer {
        <div class="spinner"></div>
        <p class="loading-container__text">Cargando hÃ©roes...</p>
      } @placeholder {
        <p class="loading-container__text">â³ Preparando...</p>
      }
    </div>
  }

  <!-- Error State -->
  @if ($error()) {
    <div class="error-container">
      <div class="error-container__icon">âš ï¸</div>
      <h3 class="error-container__title">Algo saliÃ³ mal</h3>
      <p class="error-container__message">{{ $error() }}</p>
      <button class="btn-retry" (click)="retryLoad()">ğŸ”„ Reintentar</button>
    </div>
  }

  <!-- Content -->
  @if (!$isLoading() && !$error()) {
    <div class="heroes-grid">
      @for (hero of $heroes() | heroFilter: $searchTerm(); track hero.id) {
        <div class="hero-card">
          <div class="hero-image">
            <img
              class="hero-image__img"
              [src]="'assets/heroes/' + hero.img + '.jpg'"
              [alt]="hero.superhero"
              loading="lazy"
            />
          </div>
          <div class="hero-content">
            <h3 class="hero-name">
              <a
                class="hero-name__link"
                [routerLink]="['/heroes/detail', hero.id]"
              >
                {{ hero.superhero }}
              </a>
            </h3>
            <p class="hero-publisher">{{ hero.publisher }}</p>
            <p class="hero-alter-ego">{{ hero.alter_ego }}</p>
          </div>
          <div class="hero-actions">
            <button class="btn-edit" [routerLink]="['/heroes/edit', hero.id]">
              âœï¸ Editar
            </button>
            <button class="btn-delete" (click)="deleteHero(hero)">
              ğŸ—‘ï¸ Eliminar
            </button>
          </div>
        </div>
      } @empty {
        @if ($searchTerm()) {
          <div class="empty-state">
            <p>
              No se encontraron hÃ©roes que coincidan con
              <strong class="empty-state__highlight"
                >"{{ $searchTerm() }}"</strong
              >
            </p>
            <button class="btn-clear-search" (click)="clearSearch()">
              Limpiar bÃºsqueda
            </button>
          </div>
        } @else {
          <div class="empty-state">
            <p>No hay hÃ©roes disponibles</p>
          </div>
        }
      }
    </div>
  }
</div>
